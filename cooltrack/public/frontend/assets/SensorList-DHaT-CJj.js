import{u as b,R as w,e as R,j as e,b as p,p as s,a as x,c as n,o as d,N as m,M as C,O as F,q as _,Q as u,S,T as N}from"./index-BVgz5S1Z.js";import{o as j}from"./card-M61IZ-ns.js";import{m as k,b as L,P as h,f as P}from"./tabs-lF17Y1Kq.js";import{o as A}from"./grid-BDn360O0.js";import"./index-BOzX9VC4.js";const M={Active:e.jsx(N,{size:16,color:"#10B981"}),Inactive:e.jsx(u,{size:16,color:"#6B7280"}),Maintenance:e.jsx(S,{size:16,color:"#F59E0B"}),Decommissioned:e.jsx(u,{size:16,color:"#EF4444"})},$={Active:"green",Inactive:"gray",Maintenance:"amber",Decommissioned:"red"},D={Pending:"amber",Approved:"green",Rejected:"red",Decommissioned:"gray"},G=()=>{const y=b(),[i,v]=w.useState("Pending"),{data:c,isLoading:r,error:l,mutate:f}=R("Sensor",{fields:["name","sensor_id","sensor_type","status","approval_status","gateway_id"]}),o=()=>{f()},t=(c!=null?c:[]).filter(a=>a.approval_status===i),z=()=>(t==null?void 0:t.length)===0?e.jsx(j,{mt:"4",style:{background:"var(--gray-2)"},children:e.jsxs(s,{direction:"column",align:"center",gap:"3",py:"6",children:[e.jsxs(n,{color:"gray",size:"3",children:["No ",i.toLowerCase()," sensors found"]}),e.jsx(d,{variant:"soft",onClick:o,children:"Refresh"})]})}):e.jsx(A,{columns:{initial:"1",sm:"2",md:"3"},gap:"4",mt:"4",children:t.map(a=>{var g;return e.jsx(j,{style:{transition:"all 0.2s ease",cursor:"pointer",borderLeft:`4px solid var(--${$[a.status]}-9)`},className:"hover:shadow-md hover:translate-y-[-2px]",onClick:()=>y(`/sensors/${a.name}`),children:e.jsxs(s,{direction:"column",gap:"3",children:[e.jsxs(s,{justify:"between",align:"center",children:[e.jsxs(s,{align:"center",gap:"2",children:[e.jsx(F,{size:20,className:"text-gray-600"}),e.jsxs(x,{size:"4",children:["ID: ",a.sensor_id]})]}),e.jsx(_,{color:D[a.approval_status],variant:"soft",children:a.approval_status})]}),e.jsxs(s,{direction:"column",gap:"2",children:[e.jsxs(s,{align:"center",justify:"between",children:[e.jsx(n,{size:"2",color:"gray",children:"Status"}),e.jsxs(s,{align:"center",gap:"1",children:[e.jsx(n,{size:"2",weight:"medium",children:a.status}),M[a.status]]})]}),e.jsxs(s,{align:"center",justify:"between",children:[e.jsx(n,{size:"2",color:"gray",children:"Type"}),e.jsx(n,{size:"2",weight:"medium",children:a.sensor_type})]}),e.jsxs(s,{align:"center",justify:"between",children:[e.jsx(n,{size:"2",color:"gray",children:"Gateway"}),e.jsx(n,{size:"2",weight:"medium",children:(g=a.gateway_id)!=null?g:"N/A"})]})]})]})},a.name)})});return e.jsxs(p,{p:"4",children:[e.jsxs(s,{justify:"between",align:"center",mb:"5",children:[e.jsx(x,{size:"6",children:"Sensors"}),e.jsxs(s,{gap:"3",align:"center",children:[e.jsx(n,{size:"2",color:"gray",children:new Date().toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx(d,{variant:"soft",onClick:o,disabled:r,children:e.jsxs(s,{align:"center",gap:"2",children:[r?e.jsx(m,{className:"animate-spin"}):e.jsx(C,{}),"Refresh"]})})]})]}),r&&e.jsxs(s,{justify:"center",align:"center",py:"8",gap:"3",children:[e.jsx(m,{className:"animate-spin",size:18}),e.jsx(n,{size:"3",children:"Loading sensors..."})]}),l&&e.jsx(j,{variant:"surface",mt:"4",children:e.jsxs(s,{direction:"column",align:"center",gap:"3",py:"4",children:[e.jsx(n,{color:"red",weight:"bold",children:"Failed to load sensors"}),e.jsx(n,{color:"red",size:"2",children:l.message}),e.jsx(d,{variant:"soft",color:"red",onClick:o,children:"Retry"})]})}),!r&&!l&&e.jsxs(k,{value:i,onValueChange:v,children:[e.jsxs(L,{style:{background:"transparent"},children:[e.jsx(h,{value:"Pending",children:"Pending"}),e.jsx(h,{value:"Approved",children:"Approved"}),e.jsx(h,{value:"Rejected",children:"Rejected"})]}),e.jsx(p,{pt:"4",children:e.jsx(P,{value:i,children:z()})})]})]})};export{G as default};
