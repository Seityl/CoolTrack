import{r as W,G as E,j as e,n as s,p as r,O as j,k as $,w as S,ax as m,m as t,J as y,z as M,A as L,aI as O,B as H}from"./index-BsqRx7K0.js";import{o as x}from"./card-Cl9jFH-U.js";import{m as P,b as X,P as R,f as D}from"./tabs-CqwaVAKS.js";import{m as G,d as J,P as C,f as g,b as V,T as w}from"./table-B-dRJlEl.js";import"./index-UYpWDUL8.js";import"./get-subtree-B9iClb7p.js";const F={Email:e.jsx(H,{size:window.innerWidth<768?14:16,color:"#10B981"}),SMS:e.jsx(O,{size:window.innerWidth<768?14:16,color:"#3B82F6"}),"System Notification":e.jsx(j,{size:window.innerWidth<768?14:16,color:"#F59E0B"})},T={Email:"green",SMS:"blue","System Notification":"amber"},_=({alert:n,parseConditions:f})=>{const o=f(n.condition);return e.jsx(x,{size:"2",style:{border:"1px solid var(--gray-6)",marginBottom:"12px",borderLeft:`4px solid var(--${n.enabled?"green":"gray"}-9)`},children:e.jsxs(r,{direction:"column",gap:"3",p:"3",children:[e.jsxs(r,{justify:"between",align:"center",gap:"2",children:[e.jsxs(s,{style:{minWidth:0,flex:1},children:[e.jsx(t,{size:"2",weight:"bold",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",marginBottom:"2px"},title:n.subject,children:n.subject}),e.jsx(t,{size:"1",color:"gray",style:{fontFamily:"monospace",fontSize:"10px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:n.name,children:n.name})]}),e.jsx(y,{color:n.enabled?"green":"gray",variant:"soft",size:"1",style:{borderRadius:"16px",padding:"3px 8px",fontSize:"10px",fontWeight:"500",flexShrink:0},children:n.enabled?"Active":"Inactive"})]}),e.jsxs(r,{align:"center",gap:"2",children:[e.jsx(s,{style:{display:"flex",alignItems:"center"},children:F[n.channel]}),e.jsx(t,{size:"1",weight:"medium",style:{color:`var(--${T[n.channel]}-11)`,textTransform:"capitalize"},children:n.channel})]}),e.jsxs(s,{children:[e.jsx(t,{size:"1",color:"gray",weight:"medium",style:{marginBottom:"8px"},children:"Trigger Conditions:"}),e.jsx(r,{direction:"column",gap:"2",children:o.length>0?o.map((p,u)=>e.jsx(s,{style:{background:"var(--amber-2)",padding:"4px 8px",borderRadius:"4px",border:"1px solid var(--amber-6)"},children:e.jsx(t,{size:"1",style:{fontFamily:"var(--font-mono, monospace)",fontSize:"10px",color:"var(--amber-11)",wordBreak:"break-all",lineHeight:"1.3"},children:p})},u)):e.jsx(s,{style:{background:"var(--gray-2)",padding:"4px 8px",borderRadius:"4px",border:"1px dashed var(--gray-6)"},children:e.jsx(t,{size:"1",color:"gray",style:{fontStyle:"italic"},children:"No conditions set"})})})]})]})})},ee=()=>{const[n,f]=W.useState("active"),[o,p]=W.useState(null),u=({message:i,type:a,onClose:h})=>(W.useEffect(()=>{const z=setTimeout(()=>{h()},5e3);return()=>clearTimeout(z)},[h]),e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
            @keyframes slideIn {
              from {
                transform: translateX(100%);
                opacity: 0;
              }
              to {
                transform: translateX(0);
                opacity: 1;
              }
            }
          `}),e.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,backgroundColor:a==="success"?"var(--green-9)":a==="error"?"var(--red-9)":"var(--blue-9)",color:"white",padding:"12px 16px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",gap:"8px",maxWidth:"300px",animation:"slideIn 0.3s ease-out"},children:[a==="success"&&e.jsx(M,{size:16}),a==="error"&&e.jsx(L,{size:16}),e.jsx(t,{size:"2",children:i})]})]})),{data:d,isLoading:l,error:b,mutate:A}=E("Notification",{fields:["name","subject","enabled","channel","condition"],filters:[["is_standard","=",0]]}),v=()=>{A(),B("Alerts refreshed successfully","success")},B=(i,a)=>{p({message:i,type:a,show:!0})},I=()=>{p(null)},c=(d!=null?d:[]).filter(i=>n==="active"?i.enabled:!i.enabled),k=i=>i?i.split(" and ").map(a=>a.trim()).filter(Boolean):[],N=()=>(c==null?void 0:c.length)===0?e.jsx(x,{mt:"4",style:{background:"var(--gray-2)",border:"1px dashed var(--gray-6)",boxShadow:"none",borderRadius:window.innerWidth<768?"8px":"12px"},children:e.jsxs(r,{direction:"column",align:"center",gap:"3",p:{initial:"4",sm:"6"},children:[e.jsx(s,{style:{opacity:.6},children:e.jsx(j,{size:window.innerWidth<768?24:32,color:"var(--gray-9)"})}),e.jsxs(t,{color:"gray",size:{initial:"2",sm:"3"},weight:"medium",style:{textAlign:"center"},children:["No ",n," alerts found"]}),e.jsx(S,{variant:"soft",onClick:v,size:{initial:"2",sm:"3"},style:{borderRadius:"8px",transition:"all 0.2s ease"},children:e.jsxs(r,{align:"center",gap:"2",children:[e.jsx(m,{className:l?"animate-spin":"",size:window.innerWidth<768?12:14}),"Refresh"]})})]})}):window.innerWidth<768?e.jsx(s,{mt:"4",children:c.map(i=>e.jsx(_,{alert:i,parseConditions:k},i.name))}):e.jsx(x,{mt:"4",style:{borderRadius:"12px",overflow:"hidden"},children:e.jsx(s,{style:{overflowX:"auto"},children:e.jsxs(G,{children:[e.jsx(J,{children:e.jsxs(C,{children:[e.jsx(g,{children:"Alert Name"}),e.jsx(g,{children:"Status"}),e.jsx(g,{children:"Channel"}),e.jsx(g,{children:"Trigger Conditions"})]})}),e.jsx(V,{children:c.map(i=>{const a=k(i.condition);return e.jsxs(C,{children:[e.jsx(w,{children:e.jsxs(r,{direction:"column",gap:"1",children:[e.jsx(t,{weight:"medium",size:"3",children:i.subject}),e.jsx(t,{size:"1",color:"gray",style:{fontFamily:"monospace"},children:i.name})]})}),e.jsx(w,{children:e.jsx(y,{color:i.enabled?"green":"gray",variant:"soft",style:{borderRadius:"20px",padding:"4px 10px",fontSize:"11px",fontWeight:"500",letterSpacing:"0.3px"},children:i.enabled?"Active":"Inactive"})}),e.jsx(w,{children:e.jsxs(r,{align:"center",gap:"2",children:[e.jsx(s,{style:{display:"flex",alignItems:"center"},children:F[i.channel]}),e.jsx(t,{size:"2",weight:"medium",style:{color:`var(--${T[i.channel]}-11)`,textTransform:"capitalize"},children:i.channel})]})}),e.jsx(w,{children:e.jsx(r,{direction:"column",gap:"2",style:{maxWidth:"400px"},children:a.length>0?a.map((h,z)=>e.jsx(s,{style:{background:"var(--amber-2)",padding:"6px 10px",borderRadius:"6px",border:"1px solid var(--amber-6)"},children:e.jsx(t,{size:"2",style:{fontFamily:"var(--font-mono, monospace)",fontSize:"11px",color:"var(--amber-11)",wordBreak:"break-all",lineHeight:"1.4"},children:h})},z)):e.jsx(s,{style:{background:"var(--gray-2)",padding:"6px 10px",borderRadius:"6px",border:"1px dashed var(--gray-6)"},children:e.jsx(t,{size:"2",color:"gray",style:{fontStyle:"italic"},children:"No conditions set"})})})})]},i.name)})})]})})});return e.jsxs(s,{p:{initial:"3",sm:"4",md:"6"},style:{background:"var(--gray-1)"},children:[(o==null?void 0:o.show)&&e.jsx(u,{message:o.message,type:o.type,onClose:I}),e.jsx(s,{style:{background:"white",borderBottom:"1px solid var(--gray-6)",top:0,zIndex:10,margin:window.innerWidth<768?"-12px -12px 16px":"-24px -24px 20px",padding:window.innerWidth<768?"16px":"24px",borderRadius:window.innerWidth<768?"0":"0 0 12px 12px"},children:e.jsxs(r,{justify:"between",align:"center",gap:"3",children:[e.jsxs(r,{align:"center",gap:"3",style:{minWidth:0,flex:1},children:[e.jsx(j,{size:window.innerWidth<768?20:24,color:"var(--blue-9)"}),e.jsx($,{size:{initial:"4",sm:"6"},weight:"bold",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Alerts"})]}),e.jsx(r,{gap:"2",align:"center",style:{flexShrink:0},children:e.jsx(S,{variant:"soft",onClick:v,disabled:l,size:{initial:"1",sm:"2"},style:{borderRadius:"8px",fontSize:window.innerWidth<768?"11px":"14px"},children:e.jsxs(r,{align:"center",gap:"2",children:[e.jsx(m,{className:l?"animate-spin":"",size:window.innerWidth<768?10:12}),e.jsx("span",{style:{display:window.innerWidth<380?"none":"inline"},children:"Refresh"})]})})})]})}),l&&e.jsx(x,{style:{border:"1px solid var(--gray-6)",borderRadius:window.innerWidth<768?"8px":"12px"},children:e.jsxs(r,{justify:"center",align:"center",p:{initial:"6",sm:"8"},gap:"3",children:[e.jsx(m,{className:"animate-spin",size:window.innerWidth<768?16:20,color:"var(--blue-9)"}),e.jsx(t,{size:{initial:"2",sm:"3"},weight:"medium",color:"gray",style:{display:window.innerWidth<480?"none":"block"},children:"Loading alerts..."})]})}),b&&e.jsx(x,{variant:"surface",mt:"4",style:{border:"1px solid var(--red-6)",borderRadius:window.innerWidth<768?"8px":"12px",background:"var(--red-2)"},children:e.jsxs(r,{direction:"column",align:"center",gap:"3",p:{initial:"4",sm:"6"},children:[e.jsx(s,{style:{opacity:.8},children:e.jsx(j,{size:window.innerWidth<768?20:24,color:"var(--red-9)"})}),e.jsx(t,{color:"red",weight:"bold",size:{initial:"2",sm:"3"},style:{textAlign:"center"},children:"Failed to load alerts"}),e.jsx(t,{color:"red",size:{initial:"1",sm:"2"},style:{textAlign:"center",maxWidth:"300px",lineHeight:1.5},children:b.message}),e.jsx(S,{variant:"soft",color:"red",onClick:v,size:{initial:"2",sm:"3"},style:{borderRadius:"8px"},children:e.jsxs(r,{align:"center",gap:"2",children:[e.jsx(m,{className:l?"animate-spin":"",size:window.innerWidth<768?12:14}),"Retry"]})})]})}),!l&&!b&&e.jsx(s,{children:e.jsxs(P,{value:n,onValueChange:i=>f(i),children:[e.jsx(s,{style:{borderRadius:window.innerWidth<768?"8px":"12px",padding:window.innerWidth<768?"6px":"8px",border:"1px solid var(--gray-6)",marginBottom:window.innerWidth<768?"16px":"20px",background:"white"},children:e.jsxs(X,{style:{background:"transparent",gap:window.innerWidth<768?"2px":"4px"},children:[e.jsxs(R,{value:"active",style:{borderRadius:window.innerWidth<768?"6px":"8px",padding:window.innerWidth<768?"6px 12px":"8px 16px",transition:"all 0.2s ease",fontWeight:"500",fontSize:window.innerWidth<768?"12px":"14px",flex:window.innerWidth<480?"1":"none"},children:["Active",d&&e.jsx(y,{variant:"soft",color:"green",size:"1",style:{marginLeft:window.innerWidth<768?"6px":"8px",fontSize:window.innerWidth<768?"9px":"10px"},children:d.filter(i=>i.enabled).length})]}),e.jsxs(R,{value:"inactive",style:{borderRadius:window.innerWidth<768?"6px":"8px",padding:window.innerWidth<768?"6px 12px":"8px 16px",transition:"all 0.2s ease",fontWeight:"500",fontSize:window.innerWidth<768?"12px":"14px",flex:window.innerWidth<480?"1":"none"},children:["Inactive",d&&e.jsx(y,{variant:"soft",color:"gray",size:"1",style:{marginLeft:window.innerWidth<768?"6px":"8px",fontSize:window.innerWidth<768?"9px":"10px"},children:d.filter(i=>!i.enabled).length})]})]})}),e.jsx(D,{value:n,children:N()})]})}),e.jsx("style",{children:`
          .animate-spin {
            animation: spin 1s linear infinite;
          }
          
          @keyframes spin {
            from {
              transform: rotate(0deg);
            }
            to {
              transform: rotate(360deg);
            }
          }

          /* Mobile-specific optimizations */
          @media (max-width: 767px) {
            /* Ensure proper touch targets */
            button {
              min-height: 44px;
            }
            
            /* Optimize spacing for mobile */
            [data-radix-themes] {
              --space-3: 12px;
              --space-4: 16px;
            }
          }
          
          @media (max-width: 479px) {
            /* Extra small screens */
            [data-radix-themes] {
              --space-3: 8px;
              --space-4: 12px;
            }
          }
        `})]})};export{ee as default};
