import{u as b,R as w,e as R,j as e,b as g,p as s,a as x,c as r,o as d,a3 as m,M as C,a4 as F,q as _,a1 as u,a5 as S,Q as k}from"./index-C04qYfe-.js";import{o as j}from"./card-C5T3GK1O.js";import{m as A,b as L,P as h,f as N}from"./tabs-DEgt-0wF.js";import{o as M}from"./grid-DlTU2srM.js";import"./index-rTswdvp2.js";const P={Active:e.jsx(k,{size:16,color:"#10B981"}),Inactive:e.jsx(u,{size:16,color:"#6B7280"}),Maintenance:e.jsx(S,{size:16,color:"#F59E0B"}),Decommissioned:e.jsx(u,{size:16,color:"#EF4444"})},$={Active:"green",Inactive:"gray",Maintenance:"amber",Decommissioned:"red"},D={Pending:"amber",Approved:"green",Rejected:"red",Decommissioned:"gray"},G=()=>{const y=b(),[i,v]=w.useState("Approved"),{data:c,isLoading:n,error:o,mutate:f}=R("Sensor",{fields:["name","sensor_id","sensor_type","status","approval_status","gateway_id"]}),l=()=>{f()},t=(c!=null?c:[]).filter(a=>a.approval_status===i),z=()=>(t==null?void 0:t.length)===0?e.jsx(j,{mt:"4",style:{background:"var(--gray-2)"},children:e.jsxs(s,{direction:"column",align:"center",gap:"3",py:"6",children:[e.jsxs(r,{color:"gray",size:"3",children:["No ",i.toLowerCase()," sensors found"]}),e.jsx(d,{variant:"soft",onClick:l,children:"Refresh"})]})}):e.jsx(M,{columns:{initial:"1",sm:"2",md:"3"},gap:"4",mt:"4",children:t.map(a=>{var p;return e.jsx(j,{style:{transition:"all 0.2s ease",cursor:"pointer",borderLeft:`4px solid var(--${$[a.status]}-9)`},className:"hover:shadow-md hover:translate-y-[-2px]",onClick:()=>y(`/sensors/${a.name}`),children:e.jsxs(s,{direction:"column",gap:"3",children:[e.jsxs(s,{justify:"between",align:"center",children:[e.jsxs(s,{align:"center",gap:"2",children:[e.jsx(F,{size:20,className:"text-gray-600"}),e.jsxs(x,{size:"4",children:["ID: ",a.sensor_id]})]}),e.jsx(_,{color:D[a.approval_status],variant:"soft",children:a.approval_status})]}),e.jsxs(s,{direction:"column",gap:"2",children:[e.jsxs(s,{align:"center",justify:"between",children:[e.jsx(r,{size:"2",color:"gray",children:"Status"}),e.jsxs(s,{align:"center",gap:"1",children:[e.jsx(r,{size:"2",weight:"medium",children:a.status}),P[a.status]]})]}),e.jsxs(s,{align:"center",justify:"between",children:[e.jsx(r,{size:"2",color:"gray",children:"Type"}),e.jsx(r,{size:"2",weight:"medium",children:a.sensor_type})]}),e.jsxs(s,{align:"center",justify:"between",children:[e.jsx(r,{size:"2",color:"gray",children:"Gateway"}),e.jsx(r,{size:"2",weight:"medium",children:(p=a.gateway_id)!=null?p:"N/A"})]})]})]})},a.name)})});return e.jsxs(g,{p:"4",children:[e.jsxs(s,{justify:"between",align:"center",mb:"5",children:[e.jsx(x,{size:"6",children:"Sensors"}),e.jsxs(s,{gap:"3",align:"center",children:[e.jsx(r,{size:"2",color:"gray",children:new Date().toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx(d,{variant:"soft",onClick:l,disabled:n,children:e.jsxs(s,{align:"center",gap:"2",children:[n?e.jsx(m,{className:"animate-spin"}):e.jsx(C,{}),"Refresh"]})})]})]}),n&&e.jsxs(s,{justify:"center",align:"center",py:"8",gap:"3",children:[e.jsx(m,{className:"animate-spin",size:18}),e.jsx(r,{size:"3",children:"Loading sensors..."})]}),o&&e.jsx(j,{variant:"surface",mt:"4",children:e.jsxs(s,{direction:"column",align:"center",gap:"3",py:"4",children:[e.jsx(r,{color:"red",weight:"bold",children:"Failed to load sensors"}),e.jsx(r,{color:"red",size:"2",children:o.message}),e.jsx(d,{variant:"soft",color:"red",onClick:l,children:"Retry"})]})}),!n&&!o&&e.jsxs(A,{value:i,onValueChange:v,children:[e.jsxs(L,{style:{background:"transparent"},children:[e.jsx(h,{value:"Approved",children:"Approved"}),e.jsx(h,{value:"Pending",children:"Pending"}),e.jsx(h,{value:"Rejected",children:"Rejected"})]}),e.jsx(g,{pt:"4",children:e.jsx(N,{value:i,children:z()})})]})]})};export{G as default};
