import{u as z,R as F,e as R,j as e,b as u,p as s,a as x,c as r,o as d,N as p,M as _,O as C,q as w,Q as g,S as L,T as N}from"./index-BVgz5S1Z.js";import{o as m}from"./card-M61IZ-ns.js";import{m as S,b as k,P as h,f as D}from"./tabs-lF17Y1Kq.js";import{o as P}from"./grid-BDn360O0.js";import"./index-BOzX9VC4.js";const A={Active:e.jsx(N,{size:16,color:"#10B981"}),Inactive:e.jsx(g,{size:16,color:"#6B7280"}),Maintenance:e.jsx(L,{size:16,color:"#F59E0B"}),Decommissioned:e.jsx(g,{size:16,color:"#EF4444"})},M={Active:"green",Inactive:"gray",Maintenance:"amber",Decommissioned:"red"},$={Pending:"amber",Approved:"green",Rejected:"red",Decommissioned:"gray"},H=()=>{const v=z(),[i,f]=F.useState("Pending"),{data:o,isLoading:t,error:c,mutate:l}=R("Sensor Gateway",{fields:["name","status","number_of_transmissions","last_heartbeat","approval_status"]}),b=()=>{l()},a=o==null?void 0:o.filter(n=>n.approval_status===i),y=()=>(a==null?void 0:a.length)===0?e.jsx(m,{mt:"4",style:{background:"var(--gray-2)"},children:e.jsxs(s,{direction:"column",align:"center",gap:"3",py:"6",children:[e.jsxs(r,{color:"gray",size:"3",children:["No ",i.toLowerCase()," gateways found"]}),e.jsx(d,{variant:"soft",onClick:()=>l(),children:"Refresh"})]})}):e.jsx(P,{columns:{initial:"1",sm:"2",md:"3"},gap:"4",mt:"4",children:a==null?void 0:a.map(n=>{var j;return e.jsx(m,{style:{transition:"all 0.2s ease",cursor:"pointer",borderLeft:`4px solid var(--${M[n.status]}-9)`},className:"hover:shadow-md hover:translate-y-[-2px]",onClick:()=>v(`/gateways/${n.name}`),children:e.jsxs(s,{direction:"column",gap:"3",children:[e.jsxs(s,{justify:"between",align:"center",children:[e.jsxs(s,{align:"center",gap:"2",children:[e.jsx(C,{size:20,className:"text-gray-600"}),e.jsxs(x,{size:"4",children:["ID: ",n.name]})]}),e.jsx(w,{color:$[n.approval_status],variant:"soft",children:n.approval_status})]}),e.jsxs(s,{direction:"column",gap:"2",children:[e.jsxs(s,{align:"center",justify:"between",children:[e.jsx(r,{size:"2",color:"gray",children:"Status"}),e.jsxs(s,{align:"center",gap:"1",children:[e.jsx(r,{size:"2",weight:"medium",children:n.status}),A[n.status]]})]}),e.jsxs(s,{align:"center",justify:"between",children:[e.jsx(r,{size:"2",color:"gray",children:"Transmissions"}),e.jsx(r,{size:"2",weight:"medium",children:(j=n.number_of_transmissions)!=null?j:"N/A"})]}),e.jsxs(s,{direction:"column",gap:"1",children:[e.jsx(r,{size:"2",color:"gray",children:"Last Heartbeat"}),e.jsx(r,{size:"2",weight:"medium",children:n.last_heartbeat?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date(n.last_heartbeat)):"Unavailable"})]})]})]})},n.name)})});return e.jsxs(u,{p:"4",children:[e.jsxs(s,{justify:"between",align:"center",mb:"5",children:[e.jsx(x,{size:"6",children:"Gateways"}),e.jsxs(s,{gap:"3",align:"center",children:[e.jsx(r,{size:"2",color:"gray",children:new Date().toLocaleString("en-US",{weekday:"long",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}),e.jsx(d,{variant:"soft",onClick:b,disabled:t,children:e.jsxs(s,{align:"center",gap:"2",children:[t?e.jsx(p,{className:"animate-spin"}):e.jsx(_,{}),"Refresh"]})})]})]}),t&&e.jsxs(s,{justify:"center",align:"center",py:"8",gap:"3",children:[e.jsx(p,{className:"animate-spin",size:18}),e.jsx(r,{size:"3",children:"Loading gateways..."})]}),c&&e.jsx(m,{variant:"surface",mt:"4",children:e.jsxs(s,{direction:"column",align:"center",gap:"3",py:"4",children:[e.jsx(r,{color:"red",weight:"bold",children:"Failed to load gateways"}),e.jsx(r,{color:"red",size:"2",children:c.message}),e.jsx(d,{variant:"soft",color:"red",onClick:()=>l(),children:"Retry"})]})}),!t&&!c&&e.jsxs(S,{value:i,onValueChange:f,children:[e.jsxs(k,{style:{background:"transparent"},children:[e.jsx(h,{value:"Pending",children:"Pending"}),e.jsx(h,{value:"Approved",children:"Approved"}),e.jsx(h,{value:"Rejected",children:"Rejected"})]}),e.jsx(u,{pt:"4",children:e.jsx(D,{value:i,children:y()})})]})]})};export{H as default};
