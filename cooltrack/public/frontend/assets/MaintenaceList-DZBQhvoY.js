var Q=Object.defineProperty,U=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var T=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var F=(i,s,t)=>s in i?Q(i,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[s]=t,W=(i,s)=>{for(var t in s||(s={}))q.call(s,t)&&F(i,t,s[t]);if(T)for(var t of T(s))J.call(s,t)&&F(i,t,s[t]);return i},k=(i,s)=>U(i,V(s));var N=(i,s,t)=>new Promise((d,c)=>{var g=h=>{try{x(t.next(h))}catch(m){c(m)}},l=h=>{try{x(t.throw(h))}catch(m){c(m)}},x=h=>h.done?d(h.value):Promise.resolve(h.value).then(g,l);x((t=t.apply(i,s)).next())});import{r as f,G as D,b2 as K,j as e,n as o,p as n,S,k as C,x as Y,m as a,A as $,w as j,b3 as A,a5 as Z,z as ee,ar as M,Q as H,F as I}from"./index-BsqRx7K0.js";import{s as ie,n as ne,p as se,g as re,m as te,D as ae}from"./dialog-L3xT_XU3.js";import{C as le,u as oe,g as de,y as ce,h as he,v as xe}from"./select-BJhAaAVF.js";import{r as me}from"./text-area-BqcxPxwB.js";import{o as R}from"./card-Cl9jFH-U.js";import{m as pe,d as ge,P as E,f as y,b as je,T as u}from"./table-B-dRJlEl.js";import"./index-CFk86qM9.js";import"./icons-oFCLfhG6.js";import"./index-UYpWDUL8.js";import"./index-BiKMrQoy.js";import"./get-subtree-B9iClb7p.js";const we=({message:i,type:s,onClose:t})=>(f.useEffect(()=>{const d=setTimeout(()=>{t()},5e3);return()=>clearTimeout(d)},[t]),e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
          @keyframes slideIn {
            from {
              transform: translateX(100%);
              opacity: 0;
            }
            to {
              transform: translateX(0);
              opacity: 1;
            }
          }
        `}),e.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,backgroundColor:s==="success"?"var(--green-9)":"var(--red-9)",color:"white",padding:"12px 16px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",gap:"8px",maxWidth:"300px",animation:"slideIn 0.3s ease-out"},children:[s==="success"?e.jsx(ee,{size:16}):e.jsx($,{size:16}),e.jsx(a,{size:"2",children:i})]})]})),ye=({record:i,sensors:s,getSensorDisplayName:t})=>{const d=s==null?void 0:s.find(g=>g.name===i.sensor),c=d?t(d):i.sensor;return e.jsx(R,{size:"2",style:{border:"1px solid var(--gray-6)",marginBottom:"12px"},children:e.jsxs(n,{direction:"column",gap:"3",p:"3",children:[e.jsxs(n,{justify:"between",align:"center",children:[e.jsxs(n,{align:"center",gap:"2",children:[e.jsx(H,{size:14,color:"var(--blue-9)"}),e.jsx(a,{size:"2",weight:"bold",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px"},children:c})]}),e.jsx(a,{size:"1",color:"gray",children:new Date(i.modified).toLocaleDateString()})]}),e.jsxs(n,{align:"center",gap:"2",children:[e.jsx(I,{size:12,color:"var(--gray-9)"}),e.jsx(a,{size:"1",color:"gray",children:"Technician:"}),e.jsx(a,{size:"1",weight:"medium",children:i.owner||i.user})]}),e.jsxs(o,{children:[e.jsxs(n,{align:"center",gap:"2",mb:"2",children:[e.jsx(M,{size:12,color:"var(--gray-9)"}),e.jsx(a,{size:"1",color:"gray",weight:"medium",children:"Notes:"})]}),e.jsx(a,{size:"1",style:{lineHeight:1.4,wordWrap:"break-word",overflowWrap:"break-word",hyphens:"auto"},children:i.notes||"No notes provided"})]})]})})},Fe=()=>{const[i,s]=f.useState({sensor:"",notes:""}),[t,d]=f.useState(!1),[c,g]=f.useState(null),{data:l,isLoading:x,error:h,mutate:m}=D("Cool Track Maintenance",{fields:["name","owner","user","sensor","notes","modified"],orderBy:{field:"modified",order:"desc"}}),{data:p}=D("Sensor",{fields:["name","sensor_name"],limit:200}),{createDoc:O,loading:z}=K(),b=(r,w)=>{g({message:r,type:w,show:!0})},L=()=>{g(null)},B=()=>{m(),b("Records refreshed","success")},P=()=>N(void 0,null,function*(){try{yield O("Cool Track Maintenance",{sensor:i.sensor,notes:i.notes}),m(),s({sensor:"",notes:""}),d(!1),b("Maintenance record created successfully","success")}catch(r){console.error("Error creating maintenance record:",r),b("Failed to create maintenance record. Please try again.","error")}}),v=r=>r.sensor_name||r.name,X=()=>(l==null?void 0:l.length)===0?e.jsx(R,{size:{initial:"2",sm:"3"},style:{border:"1px solid var(--gray-6)"},children:e.jsxs(n,{direction:"column",align:"center",gap:"4",p:{initial:"6",sm:"8"},children:[e.jsx(M,{size:window.innerWidth<768?24:32,color:"var(--gray-8)"}),e.jsx(a,{size:{initial:"2",sm:"3"},color:"gray",style:{textAlign:"center"},children:"No maintenance records found"}),e.jsx(a,{size:{initial:"1",sm:"2"},color:"gray",style:{textAlign:"center",maxWidth:"280px",lineHeight:1.5},children:"Create your first maintenance record to get started"}),e.jsx(j,{variant:"soft",onClick:()=>d(!0),size:{initial:"2",sm:"3"},children:e.jsxs(n,{align:"center",gap:"2",children:[e.jsx(A,{size:window.innerWidth<768?12:14}),e.jsx("span",{style:{display:window.innerWidth<380?"none":"inline"},children:"Add Maintenance Record"})]})})]})}):window.innerWidth<768?e.jsx(o,{children:l==null?void 0:l.map(r=>e.jsx(ye,{record:r,sensors:p,getSensorDisplayName:v},r.name))}):e.jsx(R,{style:{border:"1px solid var(--gray-6)"},children:e.jsx(o,{style:{overflowX:"auto"},children:e.jsxs(pe,{children:[e.jsx(ge,{children:e.jsxs(E,{children:[e.jsx(y,{children:e.jsxs(n,{align:"center",gap:"2",children:[e.jsx(H,{size:14,color:"var(--blue-9)"}),e.jsx(a,{size:"2",weight:"bold",children:"Sensor"})]})}),e.jsx(y,{children:e.jsxs(n,{align:"center",gap:"2",children:[e.jsx(I,{size:14,color:"var(--gray-9)"}),e.jsx(a,{size:"2",weight:"bold",children:"Technician"})]})}),e.jsx(y,{children:e.jsxs(n,{align:"center",gap:"2",children:[e.jsx(M,{size:14,color:"var(--gray-9)"}),e.jsx(a,{size:"2",weight:"bold",children:"Maintenance Notes"})]})}),e.jsx(y,{children:e.jsx(a,{size:"2",weight:"bold",children:"Date"})})]})}),e.jsx(je,{children:l==null?void 0:l.map(r=>{const w=p==null?void 0:p.find(G=>G.name===r.sensor),_=w?v(w):r.sensor;return e.jsxs(E,{style:{cursor:"pointer",transition:"background-color 0.2s ease"},children:[e.jsx(u,{children:e.jsx(a,{size:"2",weight:"medium",children:_})}),e.jsx(u,{children:e.jsx(a,{size:"2",children:r.owner||r.user})}),e.jsx(u,{children:e.jsx(a,{size:"2",style:{whiteSpace:"pre-line",lineHeight:1.4,maxWidth:"400px",wordWrap:"break-word"},children:r.notes||"No notes provided"})}),e.jsx(u,{children:e.jsx(a,{size:"2",children:new Date(r.modified).toLocaleDateString()})})]},r.name)})})]})})});return x?e.jsxs(o,{style:{background:"var(--gray-1)"},children:[e.jsx(o,{style:{background:"white",borderBottom:"1px solid var(--gray-6)",top:0,zIndex:10},children:e.jsx(n,{justify:"between",align:"center",p:{initial:"4",sm:"6"},children:e.jsxs(n,{align:"center",gap:"3",style:{minWidth:0,flex:1},children:[e.jsx(S,{size:window.innerWidth<768?20:24,color:"var(--blue-9)"}),e.jsx(C,{size:{initial:"4",sm:"6"},weight:"bold",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Maintenance"})]})})}),e.jsx(n,{height:"60vh",align:"center",justify:"center",children:e.jsxs(n,{direction:"column",align:"center",gap:"4",children:[e.jsx(Y,{size:"3"}),e.jsx(a,{size:{initial:"2",sm:"3"},style:{textAlign:"center"},children:"Loading maintenance records..."})]})})]}):h?e.jsxs(o,{style:{background:"var(--gray-1)"},children:[e.jsx(o,{style:{background:"white",borderBottom:"1px solid var(--gray-6)",top:0,zIndex:10},children:e.jsx(n,{justify:"between",align:"center",p:{initial:"4",sm:"6"},children:e.jsxs(n,{align:"center",gap:"3",style:{minWidth:0,flex:1},children:[e.jsx(S,{size:window.innerWidth<768?20:24,color:"var(--blue-9)"}),e.jsx(C,{size:{initial:"4",sm:"6"},weight:"bold",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Maintenance"})]})})}),e.jsx(n,{height:"60vh",align:"center",justify:"center",p:"4",children:e.jsxs(n,{direction:"column",align:"center",gap:"4",style:{textAlign:"center"},children:[e.jsx($,{size:window.innerWidth<768?24:32,color:"var(--red-9)"}),e.jsx(a,{size:{initial:"2",sm:"3"},color:"red",children:"Failed to load maintenance records"}),e.jsx(a,{size:{initial:"1",sm:"2"},color:"red",style:{maxWidth:"280px",lineHeight:1.5},children:h.message}),e.jsx(j,{variant:"soft",color:"red",onClick:()=>m(),size:{initial:"2",sm:"3"},children:"Retry"})]})})]}):e.jsxs(o,{style:{background:"var(--gray-1)"},children:[(c==null?void 0:c.show)&&e.jsx(we,{message:c.message,type:c.type,onClose:L}),e.jsx(o,{style:{background:"white",borderBottom:"1px solid var(--gray-6)",top:0,zIndex:10},children:e.jsxs(n,{justify:"between",align:"center",p:{initial:"4",sm:"6"},gap:"3",children:[e.jsxs(n,{align:"center",gap:"3",style:{minWidth:0,flex:1},children:[e.jsx(S,{size:window.innerWidth<768?20:24,color:"var(--blue-9)"}),e.jsx(C,{size:{initial:"4",sm:"6"},weight:"bold",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Maintenance"})]}),e.jsxs(n,{gap:"2",align:"center",style:{flexShrink:0},children:[e.jsxs(ie,{open:t,onOpenChange:d,children:[e.jsx(ne,{children:e.jsx(j,{variant:"soft",size:{initial:"2",sm:"3"},style:{fontSize:window.innerWidth<768?"12px":"14px"},children:e.jsxs(n,{align:"center",gap:"2",children:[e.jsx(A,{size:window.innerWidth<768?12:14}),e.jsx("span",{style:{display:window.innerWidth<480?"none":"inline"},children:"Add Maintenance"})]})})}),e.jsxs(se,{style:{maxWidth:window.innerWidth<768?"95vw":450,margin:window.innerWidth<768?"16px":"auto"},children:[e.jsx(re,{size:{initial:"4",sm:"5"},children:"Create New Maintenance Record"}),e.jsx(te,{size:{initial:"1",sm:"2"},mb:"4",style:{lineHeight:1.5},children:"Record maintenance activities and notes for sensor monitoring"}),e.jsxs(n,{direction:"column",gap:"4",children:[e.jsxs(n,{direction:"column",gap:"2",children:[e.jsx(a,{size:{initial:"1",sm:"2"},weight:"bold",children:"Sensor"}),e.jsxs(le,{value:i.sensor,onValueChange:r=>s(k(W({},i),{sensor:r})),size:{initial:"2",sm:"3"},children:[e.jsx(oe,{placeholder:"Select a sensor"}),e.jsx(de,{children:e.jsxs(ce,{children:[e.jsx(he,{children:"Available Sensors"}),p==null?void 0:p.map(r=>e.jsx(xe,{value:r.name,children:v(r)},r.name))]})})]})]}),e.jsxs(n,{direction:"column",gap:"2",children:[e.jsx(a,{size:{initial:"1",sm:"2"},weight:"bold",children:"Maintenance Notes"}),e.jsx(me,{placeholder:"Enter detailed maintenance notes, observations, or actions taken...",value:i.notes,onChange:r=>s(k(W({},i),{notes:r.target.value})),style:{minHeight:window.innerWidth<768?"100px":"120px",fontSize:window.innerWidth<768?"14px":"16px"},size:{initial:"2",sm:"3"}})]})]}),e.jsxs(n,{gap:"3",mt:"5",justify:"end",direction:{initial:"column",sm:"row"},children:[e.jsx(ae,{children:e.jsx(j,{variant:"soft",color:"gray",style:{width:window.innerWidth<640?"100%":"auto"},size:{initial:"2",sm:"3"},children:"Cancel"})}),e.jsx(j,{onClick:P,disabled:!i.sensor||!i.notes||z,loading:z,style:{width:window.innerWidth<640?"100%":"auto"},size:{initial:"2",sm:"3"},children:z?"Creating...":"Create Record"})]})]})]}),e.jsxs(j,{variant:"soft",onClick:B,disabled:x,size:{initial:"2",sm:"3"},style:{flexShrink:0,fontSize:window.innerWidth<768?"12px":"14px"},children:[e.jsx(Z,{className:x?"animate-spin":"",size:window.innerWidth<768?12:14}),e.jsx("span",{style:{display:window.innerWidth<480?"none":"inline"},children:"Refresh"})]})]})]})}),e.jsx(o,{p:{initial:"3",sm:"4",md:"6"},children:e.jsx(o,{children:X()})}),e.jsx("style",{children:`
          .animate-spin {
            animation: spin 1s linear infinite;
          }
          
          @keyframes spin {
            from {
              transform: rotate(0deg);
            }
            to {
              transform: rotate(360deg);
            }
          }

          /* Mobile-specific optimizations */
          @media (max-width: 767px) {
            /* Ensure proper touch targets */
            button {
              min-height: 44px;
            }
            
            /* Optimize spacing for mobile */
            [data-radix-themes] {
              --space-3: 12px;
              --space-4: 16px;
            }
          }
          
          @media (max-width: 479px) {
            /* Extra small screens */
            [data-radix-themes] {
              --space-3: 8px;
              --space-4: 12px;
            }
          }
        `})]})};export{Fe as default};
