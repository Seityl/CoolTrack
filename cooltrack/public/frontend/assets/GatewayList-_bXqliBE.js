import{u as f,R as v,M as b,j as e,b as z,p as s,c as r,o as y,K as F,N as _,O as R,a as w,Q as h,S as L,T as S}from"./index-DjJ_UgHu.js";import{e as T}from"./link-D7qgNc3E.js";import{o as m}from"./card-CbHK6U27.js";import{m as N,b as P,P as l,f as C}from"./tabs-B10FIYy0.js";import"./index-D25gSzPj.js";import"./index-qWNBboJE.js";import"./index-BBS9qKzp.js";const D={Active:e.jsx(S,{size:16,color:"green"}),Inactive:e.jsx(h,{size:16,color:"gray"}),Maintenance:e.jsx(L,{size:16,color:"orange"}),Decommissioned:e.jsx(h,{size:16,color:"red"})},U=()=>{const j=f(),[t,x]=v.useState("Pending"),{data:i,isLoading:c,error:o,mutate:p}=b("Sensor Gateway",{fields:["name","status","number_of_transmissions","last_heartbeat","approval_status"]}),u=()=>{p()},n=i==null?void 0:i.filter(a=>a.approval_status===t),g=()=>(n==null?void 0:n.length)===0?e.jsx(m,{children:e.jsx(s,{direction:"column",align:"center",gap:"3",py:"4",children:e.jsxs(r,{color:"gray",children:["No gateways found for ",t,"."]})})}):e.jsx(s,{wrap:"wrap",gap:"3",mt:"4",children:n==null?void 0:n.map(a=>{var d;return e.jsx(m,{style:{width:"260px",transition:"all 0.2s ease-in-out"},className:"hover:shadow-lg hover:scale-[1.01] cursor-pointer",children:e.jsx(T,{onClick:()=>j(`/gateways/${a.name}`),children:e.jsxs(s,{direction:"column",gap:"3",children:[e.jsxs(s,{align:"center",gap:"2",children:[e.jsx(R,{size:20}),e.jsxs(w,{size:"3",children:["ID: ",a.name]})]}),e.jsxs(s,{direction:"column",gap:"2",children:[e.jsxs(s,{align:"center",gap:"2",children:[e.jsx(r,{size:"2",color:"gray",children:"Status:"}),e.jsx(r,{size:"2",children:a.status}),D[a.status]]}),e.jsxs(s,{align:"center",gap:"2",children:[e.jsx(r,{size:"2",color:"gray",children:"Transmissions:"}),e.jsx(r,{size:"2",children:(d=a.number_of_transmissions)!=null?d:"N/A"})]}),e.jsxs(s,{direction:"column",gap:"1",children:[e.jsx(r,{size:"2",color:"gray",children:"Last Heartbeat"}),e.jsx(r,{size:"2",children:a.last_heartbeat?new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(new Date(a.last_heartbeat)):"Unavailable"})]})]})]})})},a.name)})});return e.jsxs(z,{p:"4",children:[e.jsxs(s,{justify:"between",align:"center",mb:"4",children:[e.jsx(r,{size:"5",weight:"bold",children:"Gateways"}),i&&i.length>0&&e.jsxs(s,{gap:"3",align:"center",children:[e.jsxs(r,{size:"2",children:["Local Time: ",new Date().toLocaleTimeString()]}),e.jsxs(y,{variant:"soft",onClick:u,children:[e.jsx(F,{})," Refresh"]})]})]}),c&&e.jsxs(s,{justify:"center",align:"center",py:"6",children:[e.jsx(_,{className:"animate-spin"})," Loading gatewaysâ€¦"]}),o&&e.jsxs(r,{color:"red",children:["Failed to load gateways: ",o.message]}),!c&&!o&&e.jsxs(N,{value:t,onValueChange:x,children:[e.jsxs(P,{children:[e.jsx(l,{value:"Pending",children:"Pending"}),e.jsx(l,{value:"Approved",children:"Approved"}),e.jsx(l,{value:"Rejected",children:"Rejected"})]}),e.jsx(C,{value:t,children:g()})]})]})};export{U as default};
