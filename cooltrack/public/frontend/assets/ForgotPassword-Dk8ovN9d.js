var m=(r,a,s)=>new Promise((o,l)=>{var i=t=>{try{n(s.next(t))}catch(c){l(c)}},h=t=>{try{n(s.throw(t))}catch(c){l(c)}},n=t=>t.done?o(t.value):Promise.resolve(t.value).then(i,h);n((s=s.apply(r,a)).next())});import{r as u,E as j,j as e,p as x,l as y,a as p,b as f,c as g,o as w,s as b,L as z,F as T,d as v}from"./index-C04qYfe-.js";import{o as k}from"./card-C5T3GK1O.js";import{u as E}from"./text-field-CMR2eUSf.js";const S=({message:r,type:a,onClose:s})=>(u.useEffect(()=>{const o=setTimeout(()=>{s()},3e3);return()=>clearTimeout(o)},[s]),e.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,backgroundColor:a==="success"?"var(--green-9)":"var(--red-9)",color:"white",padding:"12px 16px",borderRadius:"4px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",gap:"8px"},children:[a==="success"?e.jsx(T,{size:16}):e.jsx(v,{size:16}),e.jsx(g,{size:"2",children:r})]})),I=()=>{const[r,a]=u.useState(""),[s,o]=u.useState(!1),[l,i]=u.useState(null),[h,n]=u.useState("success"),{call:t}=j("frappe.core.doctype.user.user.reset_password"),c=()=>m(void 0,null,function*(){i(null),o(!0);try{yield t({user:r}),i("Password reset instructions have been sent to your email."),n("success")}catch(d){i((d==null?void 0:d.message)||"There was an error resetting your password. Please try again."),n("error")}finally{o(!1)}});return e.jsxs(e.Fragment,{children:[e.jsx(x,{align:"center",justify:"center",height:"100vh",px:"4",style:{overflow:"hidden"},children:e.jsx(k,{size:"1",style:{width:"100%",maxWidth:400},children:e.jsxs(x,{direction:"column",gap:"5",align:"center",children:[e.jsx("img",{src:y,alt:"Cool Track Logo",style:{height:60,marginBottom:10}}),e.jsx(p,{size:"6",align:"center",children:"Forgot your password?"}),e.jsx(p,{size:"4",align:"center",color:"gray",children:"We'll send you a reset link"}),e.jsxs(f,{width:"100%",children:[e.jsx(g,{as:"label",size:"2",weight:"medium",children:"Email"}),e.jsx(E,{type:"email",placeholder:"you@cooltrack.com",value:r,onChange:d=>a(d.target.value),mt:"2"})]}),e.jsx(x,{justify:"center",mt:"2",width:"100%",children:e.jsx(w,{variant:"solid",color:"blue",onClick:c,disabled:s||!r,style:{width:"100%"},children:s?e.jsx(b,{size:"3"}):"Send Reset Link"})}),e.jsxs(x,{align:"center",justify:"center",gap:"2",mt:"2",children:[e.jsx(g,{size:"2",color:"gray",children:"Remember your password?"}),e.jsx(z,{to:"/login",style:{textDecoration:"none"},children:e.jsx(g,{size:"2",color:"blue",children:"Log In"})})]})]})})}),l&&e.jsx(S,{message:l,type:h,onClose:()=>i(null)})]})};export{I as default};
