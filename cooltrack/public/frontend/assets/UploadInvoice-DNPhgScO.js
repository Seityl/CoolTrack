var H=Object.defineProperty,_=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var k=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var N=(t,n,s)=>n in t?H(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,v=(t,n)=>{for(var s in n||(n={}))k.call(n,s)&&N(t,s,n[s]);if(S)for(var s of S(n))$.call(n,s)&&N(t,s,n[s]);return t},z=(t,n)=>_(t,q(n));var b=(t,n)=>{var s={};for(var a in t)k.call(t,a)&&n.indexOf(a)<0&&(s[a]=t[a]);if(t!=null&&S)for(var a of S(t))n.indexOf(a)<0&&$.call(t,a)&&(s[a]=t[a]);return s};var A=(t,n,s)=>new Promise((a,g)=>{var f=r=>{try{j(s.next(r))}catch(y){g(y)}},m=r=>{try{j(s.throw(r))}catch(y){g(y)}},j=r=>r.done?a(r.value):Promise.resolve(r.value).then(f,m);j((s=s.apply(t,n)).next())});import{a4 as D,r as h,H as J,I as Z,J as K,al as P,am as Q,j as e,p,b as E,o as F}from"./index-X4KS0kgS.js";import{o as R}from"./card-CA4iMPDQ.js";import{s as W}from"./progress-BrbfIEHu.js";import{p as x}from"./text-fCUYU7-V.js";const Y=["horizontal","vertical"],ee=["1","2","3","4"],te={orientation:{type:"enum",className:"rt-r-orientation",values:Y,default:"horizontal",responsive:!0},size:{type:"enum",className:"rt-r-size",values:ee,default:"1",responsive:!0},color:z(v({},D.color),{default:"gray"}),decorative:{type:"boolean",default:!0}},w=h.forwardRef((t,n)=>{const m=J(t,te,K),{className:s,color:a,decorative:g}=m,f=b(m,["className","color","decorative"]);return h.createElement("span",z(v({"data-accent-color":a,role:g?void 0:"separator"},f),{ref:n,className:Z("rt-Separator",s)}))});w.displayName="Separator";function L(t){return P({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0 0 51.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"},child:[]},{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"},child:[]}]})(t)}function se(t){return P({attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"},child:[]},{tag:"path",attr:{d:"M464 336a48 48 0 1 0 96 0 48 48 0 1 0-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"},child:[]}]})(t)}const le=25*1024*1024,O=["pdf","jpg","jpeg","png","xlsx","xls","csv"],ce=()=>{const[t,n]=h.useState([]),[s,a]=h.useState([]),[g,f]=h.useState(!1),[m,j]=h.useState(!1),[r,y]=h.useState(null),C=h.useRef(null),{upload:T,progress:I,reset:B}=Q(),M=l=>{var i;const o=(i=l.name.split(".").pop())==null?void 0:i.toLowerCase(),c=O.includes(o||""),d=l.size<=le;return c?d?null:"File size exceeds 25MB limit.":`Invalid file type. Supported types: ${O.join(", ")}`},U=()=>A(void 0,null,function*(){var l;if(t.length===0){(l=C.current)==null||l.click();return}f(!0);for(let o of t){y(o.name),a(c=>c.map(d=>d.name===o.name?z(v({},d),{status:"uploading"}):d));try{const c=M(o);if(c)throw new Error(c);yield T(o,{folder:"Home/Invoices"}),a(d=>d.map(i=>i.name===o.name?z(v({},i),{status:"success"}):i))}catch(c){a(d=>d.map(i=>i.name===o.name?z(v({},i),{status:"failed",error:c.message}):i))}}y(null),f(!1),j(!0)}),G=l=>{if(l.target.files){const o=Array.from(l.target.files),c=t.map(u=>u.name),i=o.filter(u=>!c.includes(u.name)).filter(u=>!M(u));i.length>0&&(n(u=>[...u,...i]),a(u=>[...u,...i.map(X=>({name:X.name,status:"pending"}))])),l.target.value=""}},V=()=>{n([]),a([]),j(!1),B()};return e.jsx(R,{p:"4",m:"4",children:e.jsxs(p,{direction:"column",gap:"4",children:[e.jsx(E,{size:"6",children:"Upload Invoices"}),e.jsxs(p,{direction:"column",gap:"4",p:"4",children:[e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png,.xlsx,.xls,.csv",multiple:!0,onChange:G,ref:C,style:{display:"none"}}),!m&&t.length===0&&e.jsx(F,{onClick:U,variant:"solid",color:"blue",style:{display:"inline-flex",width:"fit-content"},children:"Select Files"}),!m&&t.length>0&&e.jsxs(p,{gap:"3",children:[e.jsx(F,{onClick:()=>{var l;return(l=C.current)==null?void 0:l.click()},variant:"outline",style:{display:"inline-flex",width:"fit-content"},children:"Select More Files"}),e.jsx(F,{onClick:U,variant:"solid",color:"green",disabled:g,style:{display:"inline-flex",width:"fit-content"},children:"Upload Files"})]}),g&&I!==null&&r&&e.jsxs(p,{direction:"column",gap:"2",children:[e.jsxs(x,{size:"2",weight:"medium",children:["Uploading ",r]}),e.jsx(W,{value:I})]}),t.length>0&&e.jsxs(p,{direction:"column",gap:"2",children:[e.jsx(x,{size:"2",weight:"bold",children:"Selected Files:"}),s.map(l=>e.jsxs(p,{align:"center",children:[e.jsxs(x,{size:"2",color:l.status==="success"?"green":l.status==="failed"?"red":l.status==="uploading"?"blue":"gray",children:[l.name," â€”"," ",l.status.charAt(0).toUpperCase()+l.status.slice(1)]}),l.status==="failed"&&l.error&&e.jsx(x,{size:"2",color:"red",children:l.error})]},l.name))]}),m&&e.jsx(F,{onClick:V,variant:"outline",style:{display:"inline-flex",width:"fit-content"},children:"Upload Another File"}),t.length>0&&e.jsx(e.Fragment,{children:e.jsx(w,{my:"1"})}),e.jsxs(R,{p:"4",style:{marginTop:"24px"},children:[e.jsx(E,{size:"4",children:"Invoice Guidelines"}),e.jsx(w,{my:"2"}),e.jsxs(p,{direction:"column",gap:"4",children:[e.jsxs(p,{align:"center",gap:"2",children:[e.jsx(L,{style:{color:"green"}}),e.jsx(x,{size:"2",children:"Supported formats: PDF, JPG, PNG, XLSX, XLS, CSV"})]}),e.jsxs(p,{align:"center",gap:"2",children:[e.jsx(L,{style:{color:"green"}}),e.jsx(x,{size:"2",children:"Max file size: 25MB"})]}),e.jsxs(p,{align:"center",gap:"2",children:[e.jsx(se,{style:{color:"gray"}}),e.jsx(x,{size:"2",children:"Make sure the invoice is readable and complete."})]})]})]})]})]})})};export{ce as default};
