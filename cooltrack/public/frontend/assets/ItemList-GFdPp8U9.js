var x=(i,d,s)=>new Promise((m,n)=>{var h=r=>{try{t(s.next(r))}catch(o){n(o)}},a=r=>{try{t(s.throw(r))}catch(o){n(o)}},t=r=>r.done?m(r.value):Promise.resolve(r.value).then(h,a);t((s=s.apply(i,d)).next())});import{c as g,w as y,r as w,j as e,p as j,b as I,o as u,L as z,F as b,s as F,d as L}from"./index-X4KS0kgS.js";import{m as C,d as D,P as p,f as l,b as _,T as c}from"./table-DsyRdIWN.js";import{o as v}from"./card-CA4iMPDQ.js";import{p as f}from"./text-fCUYU7-V.js";import"./index-o7eMGu49.js";const T=()=>{const{data:i,isLoading:d,error:s,mutate:m}=g("Item",{fields:["name","item_name","item_group","creation"],orderBy:{field:"creation",order:"desc"}}),{deleteDoc:n}=y(),[h,a]=w.useState(null),t=r=>x(void 0,null,function*(){if(window.confirm("Are you sure you want to delete this item?")){a(r);try{yield n("Item",r),m()}catch(k){alert("Failed to delete item.")}finally{a(null)}}});return e.jsx(v,{p:"4",m:"4",children:e.jsxs(j,{direction:"column",gap:"4",children:[e.jsxs(j,{justify:"between",align:"center",children:[e.jsx(I,{size:"6",children:"Items"}),e.jsx(u,{asChild:!0,variant:"solid",color:"blue",size:"2",children:e.jsxs(z,{to:"/items/create",children:[e.jsx(b,{style:{marginRight:6}}),"Create Item"]})})]}),d?e.jsx(j,{align:"center",justify:"center",p:"6",children:e.jsx(F,{size:"3"})}):s?e.jsxs(f,{color:"red",size:"2",children:["Failed to load items: ",s.message]}):!i||i.length===0?e.jsx(f,{size:"2",color:"gray",children:"No items found."}):e.jsxs(C,{variant:"surface",children:[e.jsx(D,{children:e.jsxs(p,{children:[e.jsx(l,{children:"Name"}),e.jsx(l,{children:"Group"}),e.jsx(l,{children:"Created On"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(_,{children:i.map(r=>e.jsxs(p,{children:[e.jsx(c,{children:r.item_name}),e.jsx(c,{children:r.item_group}),e.jsx(c,{children:new Date(r.creation).toLocaleString()}),e.jsx(c,{children:e.jsx(u,{onClick:()=>t(r.name),variant:"outline",color:"red",size:"1",disabled:h===r.name,children:e.jsx(L,{})})})]},r.name))})]})]})})};export{T as default};
