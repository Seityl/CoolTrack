var p=(i,a,s)=>new Promise((l,c)=>{var d=t=>{try{n(s.next(t))}catch(g){c(g)}},u=t=>{try{n(s.throw(t))}catch(g){c(g)}},n=t=>t.done?l(t.value):Promise.resolve(t.value).then(d,u);n((s=s.apply(i,a)).next())});import{r as h,f as z,u as S,j as e,p as x,l as E,a as j,b as f,c as o,o as L,s as k,L as y,F as C,d as T}from"./index-BVgz5S1Z.js";import{o as F}from"./card-M61IZ-ns.js";import{u as w}from"./text-field-BdL2Ghhu.js";const D=({message:i,type:a,onClose:s})=>(h.useEffect(()=>{const l=setTimeout(()=>{s()},3e3);return()=>clearTimeout(l)},[s]),e.jsxs("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,backgroundColor:a==="success"?"var(--green-9)":"var(--red-9)",color:"white",padding:"12px 16px",borderRadius:"4px",boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)",display:"flex",alignItems:"center",gap:"8px"},children:[a==="success"?e.jsx(C,{size:16}):e.jsx(T,{size:16}),e.jsx(o,{size:"2",children:i})]})),U=()=>{const[i,a]=h.useState(""),[s,l]=h.useState(""),[c,d]=h.useState(),[u,n]=h.useState(!1),{login:t}=z(),g=S(),b=r=>p(void 0,null,function*(){r==null||r.preventDefault(),n(!0);try{yield t({username:i,password:s}),d(void 0),g("/")}catch(m){const v=m instanceof Error?m.message:"Login failed";d(v)}finally{n(!1)}});return e.jsxs(e.Fragment,{children:[e.jsx(x,{align:"center",justify:"center",height:"100vh",px:"4",style:{overflow:"hidden"},children:e.jsx(F,{size:"1",style:{width:"100%",maxWidth:400},children:e.jsx("form",{onSubmit:b,children:e.jsxs(x,{direction:"column",gap:"5",align:"center",children:[e.jsx("img",{src:E,alt:"Cool Track Logo",style:{height:60,marginBottom:10}}),e.jsx(j,{size:"6",align:"center",children:"Welcome to Cool Track"}),e.jsx(j,{size:"4",align:"center",color:"gray",children:"Log in to continue"}),e.jsxs(f,{width:"100%",children:[e.jsx(o,{as:"label",size:"2",weight:"medium",children:"Email"}),e.jsx(w,{placeholder:"you@cooltrack.com",onChange:r=>a(r.target.value),value:i,mt:"2"})]}),e.jsxs(f,{width:"100%",children:[e.jsx(o,{as:"label",size:"2",weight:"medium",children:"Password"}),e.jsx(w,{type:"password",placeholder:"••••••••",onChange:r=>l(r.target.value),value:s,mt:"2"})]}),e.jsx(x,{gap:"3",justify:"center",mt:"2",width:"100%",children:e.jsx(L,{variant:"solid",color:"blue",type:"submit",disabled:u,style:{width:"100%"},children:u?e.jsx(k,{size:"3"}):"Log In"})}),e.jsxs(x,{align:"center",justify:"center",gap:"2",mt:"2",children:[e.jsx(o,{size:"2",color:"gray",children:"Don’t have an account?"}),e.jsx(y,{to:"/signup",style:{textDecoration:"none"},children:e.jsx(o,{size:"2",color:"blue",children:"Sign Up"})})]}),e.jsxs(x,{align:"center",justify:"center",gap:"2",mt:"1",children:[e.jsx(o,{size:"2",color:"gray",children:"Forgot password?"}),e.jsx(y,{to:"/forgot-password",style:{textDecoration:"none"},children:e.jsx(o,{size:"2",color:"blue",children:"Reset it"})})]})]})})})}),c&&e.jsx(D,{message:c,type:"error",onClose:()=>d(void 0)})]})};export{U as default};
